<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FocusUp - Proyecto ML</title>

    <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
    <script defer src="{{ url_for('static', filename='css/js/index.js') }}"></script>
</head>
<body>
    <!-- Encabezado -->
    <header class="main-header">
        <div class="header-left">
            <img src="{{ url_for('static', filename='img/focusup1.png') }}" alt="Logo FocusUp" class="logo">
        </div>

        <div class="header-center">
            <h1>Proyecto ML</h1>
        </div>

        <div class="header-right">
            <img src="{{ url_for('static', filename='img/logoUdec.png') }}" alt="Logo UDEC" class="logo udec-logo">

    </header>
    <!-- Imagen de usuario -->
            <div class="user-menu-container">
                <img src="{{ url_for('static', filename='img/user.png') }}" alt="Usuario" class="user-icon" id="userIcon">

                <!-- Men√∫ desplegable -->
                <div class="dropdown-menu" id="dropdownMenu">
                    <ul>
                        <li><a href="{{ url_for('cuenta') }}">Cuenta</a></li>
                        <li><a href="{{ url_for('index') }}">Inicio</a></li>
                        <li><a href="{{ url_for('formulario') }}">Formulario</a></li>
                        <li><a href="{{ url_for('logout') }}">Salir</a></li>
                    </ul>
                </div>
            </div>
        </div>

    <!-- Contenido principal -->
    <main>
        <!-- Dashboard de Resultados -->
        {% if ultimos_resultados %}
        <section class="dashboard-section">
            <div class="dashboard-header">
                <h2>Tu Progreso en FocusUp</h2>
                <p>Resumen de tus ultimas evaluaciones</p>
            </div>

            <!-- Estadisticas Resumen -->
            {% if estadisticas and estadisticas.total_evaluaciones > 0 %}
            <div class="stats-summary">
                <div class="stat-box">
                    <div class="stat-icon">üìä</div>
                    <div class="stat-info">
                        <h3>{{ estadisticas.total_evaluaciones }}</h3>
                        <p>Evaluaciones</p>
                    </div>
                </div>
                <div class="stat-box">
                    <div class="stat-icon">üìà</div>
                    <div class="stat-info">
                        <h3>{{ "%.2f"|format(estadisticas.promedio_puntaje) }}</h3>
                        <p>Promedio</p>
                    </div>
                </div>
                <div class="stat-box">
                    <div class="stat-icon">‚≠ê</div>
                    <div class="stat-info">
                        <h3>{{ ultimos_resultados[0].nivel_prediccion }}</h3>
                        <p>Ultimo Nivel</p>
                    </div>
                </div>
                <div class="stat-box {% if tendencia %}stat-box-tendencia tendencia-{{ tendencia.tipo }}{% endif %}">
                    <div class="stat-icon">{% if tendencia %}{{ tendencia.icono }}{% else %}üìÖ{% endif %}</div>
                    <div class="stat-info">
                        <h3>{% if tendencia %}{{ tendencia.texto }}{% else %}{{ ultimos_resultados[0].fecha_creacion.strftime('%d/%m') }}{% endif %}</h3>
                        <p>{% if tendencia %}Tendencia{% else %}Ultima Evaluacion{% endif %}</p>
                    </div>
                </div>
            </div>
            {% endif %}

            <!-- Insights Automaticos -->
            {% if insights %}
            <div class="insights-section">
                <h3>üí° Insights de tu Progreso</h3>
                <div class="insights-grid">
                    {% for insight in insights %}
                    <div class="insight-card">
                        <div class="insight-icon">{{ insight.icono }}</div>
                        <div class="insight-content">
                            <h4>{{ insight.titulo }}</h4>
                            <p>{{ insight.mensaje }}</p>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}

            <!-- Grafica de Evolucion -->
            <div class="chart-container">
                <h3>Evolucion de tu Puntaje</h3>
                <canvas id="puntajeChart"></canvas>
            </div>

            <!-- Grafica de Radar - Analisis de Aspectos -->
            {% if ultimos_resultados %}
            <div class="chart-container">
                <h3>Analisis Multidimensional</h3>
                <p class="chart-subtitle">Comparativa de diferentes aspectos de tu ultimo resultado</p>
                <canvas id="radarChart"></canvas>
            </div>
            {% endif %}

            <!-- Ultimos Resultados -->
            <div class="recent-results">
                <h3>Ultimas Evaluaciones</h3>
                <div class="results-grid">
                    {% for resultado in ultimos_resultados[:3] %}
                    <div class="result-mini-card">
                        <div class="result-mini-header">
                            <span class="nivel-badge nivel-{{ resultado.nivel_prediccion|lower|replace(' ', '-') }}">
                                {{ resultado.nivel_prediccion }}
                            </span>
                            <span class="result-date-mini">{{ resultado.fecha_creacion.strftime('%d/%m/%Y') }}</span>
                        </div>
                        <div class="result-mini-body">
                            <div class="puntaje-display">
                                <span class="puntaje-num">{{ "%.1f"|format(resultado.puntaje_prediccion) }}</span>
                                <span class="puntaje-label">/10</span>
                            </div>
                            <div class="result-mini-recs">
                                <p><strong>Top Recomendacion:</strong></p>
                                {% if resultado.recomendaciones %}
                                <p class="rec-text">{{ resultado.recomendaciones[0].titulo }}</p>
                                <p class="rec-detail">{{ resultado.recomendaciones[0].mensaje }}</p>
                                {% else %}
                                <p class="rec-text">Sigue asi!</p>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                <a href="{{ url_for('cuenta', seccion='resultados') }}" class="btn-ver-todos">Ver Historial Completo</a>
            </div>
        </section>
        {% else %}
        <!-- Mensaje si no hay resultados -->
        <section class="no-results-section">
            <div class="no-results-card">
                <div class="no-results-icon">üìä</div>
                <h3>Aun no tienes evaluaciones</h3>
                <p>Completa tu primera evaluacion para ver tu progreso aqui</p>
                <a href="{{ url_for('formulario') }}" class="btn-primary-dashboard">Hacer Primera Evaluacion</a>
            </div>
        </section>
        {% endif %}

        <!-- Separador -->
        <div class="content-divider"></div>

        <!-- Primer bloque -->
        <div class="blockaz">
            <div class="blockaz-left">
            <img src="{{ url_for('static', filename='img/Procras.png') }}" alt="Img Azul" class="blockaz-img">
            </div>
            <div class="blockaz-right">
            <h2 class="blockaz-title">Objetivo de FocusUp</h2>
       <p class="block_1_LN-text">Desarrollar un modelo de ML que prediga la cantidad de horas de procrastinaci√≥n diaria de los estudiantes en los colegios y universidades, 
        a partir de los datos de uso del tel√©fono celular y las aplicaciones m√°s utilizadas </p>
        </div>
            </div>
            </div>
        </div>
    
        <!-- Segundo bloque -->
         </div>
            <div class="block_1">
        <div class="block_1-left">
            <h2 class="block_1-title">Objetivos espec√≠ficos</h2>
            <p class="block_1-text">
            <p><li>Recopilar informaci√≥n relevante sobre h√°bitos digitales y acad√©micos de estudiantes universitarios.</li></p>
            <p><li>Identificar los factores clave que influyen en la procrastinaci√≥n con an√°lisis de datos y ML.</li></p>
            <p><li>Entrenar un modelo que estime el nivel de procrastinaci√≥n de forma personalizada y precisa.</li></p>
            <p><li>Mostrar resultados y recomendaciones pr√°cticas en la plataforma FocusUp para mejorar el tiempo y bienestar digital.

</li></p>
        </div>
        <div class="block_1-right">
            <img src="{{ url_for('static', filename='img/Procras.png') }}" alt="Img Ref-Procrastinacion" class="block_1-img">
        </div>
        </div>
        <!-- Tercer bloque -->           
         <div class="blockaz">
        <div class="blockaz-left">
       
        <img src="{{ url_for('static', filename='img/Procras.png') }}" alt="Img Ref-Procrastinacion" class="blockaz-img">
        </div>
         <div class="blockaz-right">
            <h2 class="blockaz-title">¬øQu√© es la procrastinaci√≥n?</h2>
            <p class="blockaz-text">La procrastinaci√≥n es el acto de retrasar o posponer tareas o decisiones. A menudo se debe a la falta de motivaci√≥n, miedo al fracaso o simplemente a la distracci√≥n.</p>
        </div>
        </div>

        <!-- cuarto bloque -->

            <div class="block_1">
        <div class="block_1-left">
            <h2 class="block_1-title">Causas frecuentes de la procrastinaci√≥n</h2>
            <p class="block_1-text">
           <p><li>Uso excesivo de celulares y redes sociales.</li></p>
            <p><li>Falta de motivaci√≥n y metas claras.</li></p>
            <p><li>Miedo al fracaso.</li></p>
            <p><li>Desorganizaci√≥n y no priorizar tareas.</li></p>
        </div>
        <div class="block_1-right">
            <img src="{{ url_for('static', filename='img/Procras.png') }}" alt="Img Ref-Procrastinacion" class="block_1-img">
        </div>
        </div>

        <!-- Nuevo bloque: Estadisticas Impactantes -->
        <div class="blockaz">
        <div class="blockaz-left">
            <img src="{{ url_for('static', filename='img/Procras.png') }}" alt="Img Ref-Procrastinacion" class="blockaz-img">
        </div>
        <div class="blockaz-right">
            <h2 class="blockaz-title">Estad√≠sticas Impactantes</h2>
            <p><li>El <strong>88%</strong> de los estudiantes procrastinan al menos una hora al d√≠a</li></p>
            <p><li>Los j√≥venes revisan su celular en promedio <strong>96 veces al d√≠a</strong></li></p>
            <p><li>El <strong>70%</strong> del tiempo en redes sociales se considera improductivo</li></p>
            <p><li>La procrastinaci√≥n aumenta el estr√©s en un <strong>45%</strong></li></p>
            <p><li>Estudiantes que controlan su uso del celular mejoran sus calificaciones en un <strong>30%</strong></li></p>
        </div>
        </div>

        <!-- Nuevo bloque: Tecnicas Anti-Procrastinacion -->
        <div class="block_1">
        <div class="block_1-left">
            <h2 class="block_1-title">T√©cnicas Comprobadas</h2>
            <p class="block_1-text">
            <p><li><strong>T√©cnica Pomodoro:</strong> 25 minutos de trabajo concentrado, 5 de descanso</li></p>
            <p><li><strong>Regla de los 2 minutos:</strong> Si toma menos de 2 minutos, hazlo ya</li></p>
            <p><li><strong>M√©todo 1-3-5:</strong> 1 tarea grande, 3 medianas, 5 peque√±as al d√≠a</li></p>
            <p><li><strong>Timeboxing:</strong> Asigna bloques de tiempo espec√≠ficos para cada actividad</li></p>
            <p><li><strong>Elimina distracciones:</strong> Modo no molestar durante estudio</li></p>
        </div>
        <div class="block_1-right">
            <img src="{{ url_for('static', filename='img/Procras.png') }}" alt="Img Ref-Procrastinacion" class="block_1-img">
        </div>
        </div>

        <!-- Nuevo bloque: Impacto del Celular -->
        <div class="blockaz">
        <div class="blockaz-left">
            <img src="{{ url_for('static', filename='img/Procras.png') }}" alt="Img Ref-Procrastinacion" class="blockaz-img">
        </div>
        <div class="blockaz-right">
            <h2 class="blockaz-title">Impacto del Uso del Celular</h2>
            <p><li><strong>Atenci√≥n fragmentada:</strong> Cada notificaci√≥n interrumpe tu concentraci√≥n por 23 minutos</li></p>
            <p><li><strong>Calidad del sue√±o:</strong> La luz azul reduce la melatonina en un 50%</li></p>
            <p><li><strong>Productividad:</strong> El multitasking reduce la eficiencia en un 40%</li></p>
            <p><li><strong>Bienestar mental:</strong> M√°s de 3 horas en redes aumenta ansiedad</li></p>
            <p><li><strong>Memoria:</strong> El uso excesivo afecta la capacidad de retenci√≥n</li></p>
        </div>
        </div>

        <!-- Nuevo bloque: Herramientas Utiles -->
        <div class="block_1">
        <div class="block_1-left">
            <h2 class="block_1-title">Herramientas Recomendadas</h2>
            <p class="block_1-text">
            <p><li><strong>Forest:</strong> App que gamifica la concentraci√≥n plantando √°rboles virtuales</li></p>
            <p><li><strong>Freedom:</strong> Bloquea apps y sitios web durante tiempo de estudio</li></p>
            <p><li><strong>Notion/Todoist:</strong> Organizadores de tareas y proyectos</li></p>
            <p><li><strong>Screen Time:</strong> Monitorea y limita uso del dispositivo</li></p>
            <p><li><strong>Cold Turkey:</strong> Bloqueo estricto de distracciones digitales</li></p>
        </div>
        <div class="block_1-right">
            <img src="{{ url_for('static', filename='img/Procras.png') }}" alt="Img Ref-Procrastinacion" class="block_1-img">
        </div>
        </div>

        <!-- Nuevo bloque: Consejos Practicos -->
        <div class="blockaz">
        <div class="blockaz-left">
            <img src="{{ url_for('static', filename='img/Procras.png') }}" alt="Img Ref-Procrastinacion" class="blockaz-img">
        </div>
        <div class="blockaz-right">
            <h2 class="blockaz-title">Consejos Pr√°cticos para Estudiantes</h2>
            <p><li>Crea una rutina de estudio consistente y resp√©tala</li></p>
            <p><li>Usa el celular en modo avi√≥n durante sesiones de estudio</li></p>
            <p><li>Divide proyectos grandes en tareas peque√±as y manejables</li></p>
            <p><li>Recomp√©nsate despu√©s de completar tareas importantes</li></p>
            <p><li>Busca un compa√±ero de estudio para accountability</li></p>
            <p><li>Mant√©n tu espacio de estudio ordenado y libre de distracciones</li></p>
        </div>
        </div>
       
        <!-- quinto bloque -->         
         <div class="blockaz">
        <div class="blockaz-left">
       
        <img src="{{ url_for('static', filename='img/Procras.png') }}" alt="Img Ref-Procrastinacion" class="blockaz-img">
        </div>
         <div class="blockaz-right">
            <h2 class="blockaz-title">Consecuencias de procrastinar</h2>
            <p><li>Disminuci√≥n del rendimiento acad√©mico</li></p>
            <p><li>Sentimientos de culpa y frustraci√≥n</li></p>
            <p><li>Aumento de estr√©s y ansiedad</li></p>
            <p><li>P√©rdida de tiempo y oportunidades</li></p>
        </div>
        </div>
        <!-- referencias bibliograficas-->
        <div class="block1 referencias">
        <h2 class="block1-title">Referencias bibliogr√°ficas</h2>
        <ul class="block1-list">
            <li>Han, J., Kamber, M., & Pei, J. (2012). <i>Data mining: Concepts and techniques</i> (3rd ed.). Elsevier.</li>
            <li>G√©ron, A. (2023). <i>Hands-on machine learning with Scikit-Learn, Keras, and TensorFlow</i> (3rd ed.). O'Reilly Media.</li>
            <li>Bishop, C. M. (2006). <i>Pattern recognition and machine learning</i>. Springer.</li>
            <li>Steel, P. (2007). The nature of procrastination: A meta-analytic and theoretical review of quintessential self-regulatory failure. <i>Psychological Bulletin, 133</i>(1), 65‚Äì94. https://doi.org/10.1037/0033-2909.133.1.65</li>
            <li>Tuckman, B. W. (1991). The development and concurrent validity of the Procrastination Scale. <i>Educational and Psychological Measurement, 51</i>(2), 473‚Äì480. https://doi.org/10.1177/0013164491512022</li>
            <li>Scikit-Learn Developers. (2024). <i>Scikit-learn: Machine learning in Python</i>. https://scikit-learn.org</li>
            <li>OpenAI. (2024). <i>ChatGPT (GPT-4o) [Large language model]</i>. https://openai.com/chatgpt/</li>
            <li>Perplexity AI. (2024). <i>Perplexity AI, Search and Answer Platform</i>. https://www.perplexity.ai</li>
        </ul>
        </div>






    </main><!-- main de contenido -->

    <!-- Pie de p√°gina -->
    <footer class="main-footer">
        <p>¬© 2025 FocusUp | Proyecto desarrollado por Sebasti√°n Casas / Miguel D√≠az</p>
    </footer>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <!-- Script para la grafica -->
    {% if ultimos_resultados %}
    <script>
        // Datos para la grafica (invertir orden para mostrar del mas antiguo al mas reciente)
        const resultados = {{ ultimos_resultados|reverse|list|tojson }};

        const fechas = resultados.map(r => {
            const fecha = new Date(r.fecha_creacion);
            return fecha.toLocaleDateString('es-ES', { day: '2-digit', month: '2-digit' });
        });

        const puntajes = resultados.map(r => r.puntaje_prediccion);

        // Configuracion de la grafica
        const ctx = document.getElementById('puntajeChart').getContext('2d');
        const gradient = ctx.createLinearGradient(0, 0, 0, 400);
        gradient.addColorStop(0, 'rgba(102, 126, 234, 0.5)');
        gradient.addColorStop(1, 'rgba(118, 75, 162, 0.1)');

        new Chart(ctx, {
            type: 'line',
            data: {
                labels: fechas,
                datasets: [{
                    label: 'Puntaje de Procrastinacion',
                    data: puntajes,
                    borderColor: 'rgb(102, 126, 234)',
                    backgroundColor: gradient,
                    borderWidth: 3,
                    tension: 0.4,
                    fill: true,
                    pointBackgroundColor: 'rgb(102, 126, 234)',
                    pointBorderColor: '#fff',
                    pointBorderWidth: 2,
                    pointRadius: 6,
                    pointHoverRadius: 8
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: true,
                        position: 'top',
                        labels: {
                            font: {
                                size: 14,
                                family: "'Segoe UI', sans-serif"
                            }
                        }
                    },
                    tooltip: {
                        backgroundColor: 'rgba(0, 0, 0, 0.8)',
                        padding: 12,
                        titleFont: {
                            size: 14
                        },
                        bodyFont: {
                            size: 13
                        },
                        callbacks: {
                            label: function(context) {
                                return 'Puntaje: ' + context.parsed.y.toFixed(2) + '/10';
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 10,
                        ticks: {
                            stepSize: 2,
                            font: {
                                size: 12
                            }
                        },
                        grid: {
                            color: 'rgba(0, 0, 0, 0.05)'
                        }
                    },
                    x: {
                        ticks: {
                            font: {
                                size: 12
                            }
                        },
                        grid: {
                            display: false
                        }
                    }
                }
            }
        });

        // Grafica de Radar - Analisis Multidimensional
        const ultimoResultado = resultados[resultados.length - 1]; // Ultimo cronologicamente
        const datosForm = ultimoResultado.datos_formulario;

        // Calcular puntuaciones normalizadas (0-10) para cada aspecto
        const aspectos = {
            'Uso Diario': Math.max(0, 10 - (parseFloat(datosForm.daily_usage) / 10 * 10)), // Menos es mejor
            'Horas de Sueno': Math.min(10, parseFloat(datosForm.sleephours) / 8 * 10), // 8 horas = 10 pts
            'Rendimiento': parseFloat(datosForm.academic_perf) * 2, // 0-5 a 0-10
            'Ejercicio': datosForm.exercise === 'frecuente' ? 10 : (datosForm.exercise === 'moderado' ? 6 : 3),
            'Redes Sociales': Math.max(0, 10 - (parseFloat(datosForm.time_social_media) / 4 * 10)), // Menos es mejor
            'Habitos': Math.max(0, 10 - (parseFloat(datosForm.screen_before_bed) / 2 * 10)) // Menos pantalla = mejor
        };

        const ctxRadar = document.getElementById('radarChart').getContext('2d');
        new Chart(ctxRadar, {
            type: 'radar',
            data: {
                labels: Object.keys(aspectos),
                datasets: [{
                    label: 'Tu Evaluacion',
                    data: Object.values(aspectos),
                    backgroundColor: 'rgba(102, 126, 234, 0.2)',
                    borderColor: 'rgb(102, 126, 234)',
                    borderWidth: 2,
                    pointBackgroundColor: 'rgb(102, 126, 234)',
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: 'rgb(102, 126, 234)'
                }, {
                    label: 'Objetivo Ideal',
                    data: [10, 10, 10, 10, 10, 10],
                    backgroundColor: 'rgba(56, 239, 125, 0.1)',
                    borderColor: 'rgba(56, 239, 125, 0.5)',
                    borderWidth: 1,
                    borderDash: [5, 5],
                    pointRadius: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    r: {
                        beginAtZero: true,
                        max: 10,
                        ticks: {
                            stepSize: 2,
                            font: {
                                size: 11
                            }
                        },
                        pointLabels: {
                            font: {
                                size: 13,
                                weight: '600'
                            }
                        },
                        grid: {
                            color: 'rgba(0, 0, 0, 0.1)'
                        }
                    }
                },
                plugins: {
                    legend: {
                        position: 'top',
                        labels: {
                            font: {
                                size: 13
                            },
                            padding: 15
                        }
                    },
                    tooltip: {
                        backgroundColor: 'rgba(0, 0, 0, 0.8)',
                        padding: 12,
                        callbacks: {
                            label: function(context) {
                                return context.dataset.label + ': ' + context.parsed.r.toFixed(1) + '/10';
                            }
                        }
                    }
                }
            }
        });
    </script>
    {% endif %}
</body>
</html>
